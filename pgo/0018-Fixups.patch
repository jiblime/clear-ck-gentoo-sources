From 2f401ca1e64b54e11271a1f35925cdd385699224 Mon Sep 17 00:00:00 2001
From: Jarmo Tiitto <jarmo.tiitto@gmail.com>
Date: Sat, 2 Jun 2018 23:40:50 +0300
Subject: [PATCH 18/21] Fixups.

---
 scripts/kgcov/genPGOKernel | 4 ++--
 scripts/kgcov/mergegcov.sh | 6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/scripts/kgcov/genPGOKernel b/scripts/kgcov/genPGOKernel
index 4eff9338be79..1bdc92cae4ca 100755
--- a/scripts/kgcov/genPGOKernel
+++ b/scripts/kgcov/genPGOKernel
@@ -33,7 +33,7 @@ if [ ! -f gcnoprofile.tar.gz ]; then
     die "It should be created by `gathergcno.sh gcnoprofile.tar.gz` after successful buildGCOVKernel run"
 fi
 echo 'Extracting profile data..'
-CHECKPROF=/tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelPGO/
+CHECKPROF=/tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelsrc/
 if [ ! -f $CHECKPROF/mm/.tmp_mmap.gcda ]; then
     rm -fr /tmp/kernelPGOdump
     mkdir /tmp/kernelPGOdump
@@ -69,7 +69,7 @@ fi
 echo 'Binding profile data dir..'
 mkdir -p /tmp/kernelPGO/
 if [ ! -f '/tmp/kernelPGO/mm/.tmp_mmap.gcda' ]; then
-    sudo mount --rbind /tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelPGO /tmp/kernelPGO
+    sudo mount --rbind /tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelsrc /tmp/kernelPGO
 fi
 
 cleanup2() {
diff --git a/scripts/kgcov/mergegcov.sh b/scripts/kgcov/mergegcov.sh
index 3203914e832f..46add039c830 100755
--- a/scripts/kgcov/mergegcov.sh
+++ b/scripts/kgcov/mergegcov.sh
@@ -3,13 +3,13 @@
 # Batch Merge multiple GCOV profile data sets
 # all profileXX.tar.gz are extracted to /tmp/kernelPGOdumpXX dirs.
 # Counters are then accumulated into /tmp/kernelPGOdump dir
-KGCCVER=/opt/kgcc-7.2/bin
+KGCCVER=/opt/kgcc-7.3/bin
 
 NUM=1
 for gcdapkg in $@; do
 	mkdir -p /tmp/kernelPGOdump${NUM}
 	tar xzf ${gcdapkg} -C /tmp/kernelPGOdump${NUM}
-    if [[ ! -f /tmp/kernelPGOdump${NUM}/sys/kernel/debug/gcov/tmp/kernelPGO/mm/mmap.gcda  ]]; then
+    if [[ ! -f /tmp/kernelPGOdump${NUM}/sys/kernel/debug/gcov/tmp/kernelsrc/mm/mmap.gcda  ]]; then
         echo 'No Kernel profiling data available. Stop.'
         exit 1
     fi
@@ -34,7 +34,7 @@ while [[ $MC -lt $NUM ]]; do
     (( MC += 1 ))
 done
 
-if [[ ! -f /tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelPGO/mm/mmap.gcda  ]]; then
+if [[ ! -f /tmp/kernelPGOdump/sys/kernel/debug/gcov/tmp/kernelsrc/mm/mmap.gcda  ]]; then
 	echo 'Profile Data Merge failed..'
 	exit 1
 fi
-- 
2.19.2

