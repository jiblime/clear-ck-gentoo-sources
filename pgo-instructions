Credits to /u/JATmatic on reddit.com and http://coolypf.com/kpgo
https://reddit.com/r/kernel/comments/a2og7u/the_process_of_building_the_kernel_with_gcc/

In /usr/src/linux, run:
./scripts/gcov/buildGCOVKernel bzImage modules

The build will happen in a bind mounted /tmp/kernelsrc. 
When done, while still in /usr/src/linux, run
make modules_install install
as well as creating a initramfs, rebuilding/resigning modules, etc.

When booted into the gcov kernel, go to /usr/src/linux and run:

mkdir profile
for (( x=0; x<10; x++ )); do
	sleep 3; ./scripts/gcov/gather.sh profile/profile"${x}".tar.gz
done

./scripts/gcov/mergegcov.sh $(ls profile/*)

While still in /usr/src/linux, finally run (perhaps run `make clean` before as well):

./scripts/gcov/genPGOKernel bzImage modules

Then install as normal.

Or use this janky wrapper script to take care of the profiling step.

```
#!/bin/bash

gather()
{
	echo "Running gather.sh ${count} times..."
	mkdir profile
	for (( x=0; x<"${count}"; x++ )); do
		sleep 3; ./scripts/gcov/gather.sh profile/profile"${x}".tar.gz
	done
}

merge()
{
	echo "Merging profile data..."
	./scripts/gcov/mergegcov.sh $(ls profile/*)
}


read -p "How many times to execute gather.sh? " -i 10 -e count

gather merge
```
